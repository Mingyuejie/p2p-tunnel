(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da9a31f6"],{"098a":function(e,t,n){"use strict";n.r(t);var o=n("7a23");Object(o["L"])("data-v-7e66947e");var c={class:"upnp-wrap"},i={class:"head"},r=Object(o["p"])("增加映射"),l=Object(o["n"])("span",{style:{"margin-left":".6rem"}},"添加时，有效期为秒数,0为系统默认，尚不确定具体有效期",-1),a=Object(o["p"])("保存"),u=Object(o["p"])("取消");function d(e,t,n,d,b,O){var j=Object(o["R"])("el-button"),p=Object(o["R"])("el-option"),f=Object(o["R"])("el-select"),m=Object(o["R"])("el-input"),s=Object(o["R"])("el-table-column"),w=Object(o["R"])("el-popconfirm"),P=Object(o["R"])("el-table"),g=Object(o["S"])("loading");return Object(o["I"])(),Object(o["m"])("div",c,[Object(o["n"])("div",i,[Object(o["q"])(j,{type:"primary",size:"mini",style:{"margin-right":".6rem"},onClick:d.handleAdd},{default:Object(o["gb"])((function(){return[r]})),_:1},8,["onClick"]),Object(o["q"])(f,{modelValue:e.deviceIndex,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.deviceIndex=t}),placeholder:"请选择设备",size:"mini",onChange:d.deviceChange},{default:Object(o["gb"])((function(){return[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["P"])(e.devices,(function(e){return Object(o["I"])(),Object(o["k"])(p,{key:e.index,label:e.text,value:e.index},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),l]),Object(o["hb"])(Object(o["q"])(P,{data:e.list,border:"",size:"mini"},{default:Object(o["gb"])((function(){return[Object(o["q"])(s,{prop:"PrivatePort",label:"内网端口",width:"100"},{default:Object(o["gb"])((function(e){return[e.row.add?(Object(o["I"])(),Object(o["k"])(m,{key:0,modelValue:e.row.PrivatePort,"onUpdate:modelValue":function(t){return e.row.PrivatePort=t},size:"mini"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o["I"])(),Object(o["m"])(o["b"],{key:1},[Object(o["p"])(Object(o["V"])(e.row.PrivatePort),1)],64))]})),_:1}),Object(o["q"])(s,{prop:"PublicPort",label:"外网端口",width:"100"},{default:Object(o["gb"])((function(e){return[e.row.add?(Object(o["I"])(),Object(o["k"])(m,{key:0,modelValue:e.row.PublicPort,"onUpdate:modelValue":function(t){return e.row.PublicPort=t},size:"mini"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o["I"])(),Object(o["m"])(o["b"],{key:1},[Object(o["p"])(Object(o["V"])(e.row.PublicPort),1)],64))]})),_:1}),Object(o["q"])(s,{prop:"Expiration",label:"有效期",width:"150"},{default:Object(o["gb"])((function(e){return[e.row.add?(Object(o["I"])(),Object(o["k"])(m,{key:0,modelValue:e.row.Lifetime,"onUpdate:modelValue":function(t){return e.row.Lifetime=t},size:"mini"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o["I"])(),Object(o["m"])(o["b"],{key:1},[Object(o["p"])(Object(o["V"])(e.row.Expiration),1)],64))]})),_:1}),Object(o["q"])(s,{prop:"Protocol",label:"协议",width:"100"},{default:Object(o["gb"])((function(t){return[t.row.add?(Object(o["I"])(),Object(o["k"])(f,{key:0,modelValue:t.row.Protocol,"onUpdate:modelValue":function(e){return t.row.Protocol=e},placeholder:"选择协议",size:"mini"},{default:Object(o["gb"])((function(){return[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["P"])(e.protocols,(function(e,t){return Object(o["I"])(),Object(o["k"])(p,{key:t,label:e,value:t},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"])):(Object(o["I"])(),Object(o["m"])(o["b"],{key:1},[Object(o["p"])(Object(o["V"])(t.row.Protocol),1)],64))]})),_:1}),Object(o["q"])(s,{prop:"Description",label:"说明"},{default:Object(o["gb"])((function(e){return[e.row.add?(Object(o["I"])(),Object(o["k"])(m,{key:0,modelValue:e.row.Description,"onUpdate:modelValue":function(t){return e.row.Description=t},size:"mini"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o["I"])(),Object(o["m"])(o["b"],{key:1},[Object(o["p"])(Object(o["V"])(e.row.Description),1)],64))]})),_:1}),Object(o["q"])(s,{prop:"todo",label:"操作",width:"145",fixed:"right",class:"t-c"},{default:Object(o["gb"])((function(e){return[e.row.add?(Object(o["I"])(),Object(o["m"])(o["b"],{key:0},[Object(o["q"])(j,{type:"primary",size:"mini",onClick:function(t){return d.handleSave(e)},loading:e.row.loading},{default:Object(o["gb"])((function(){return[a]})),_:2},1032,["onClick","loading"]),e.row.loading?Object(o["l"])("",!0):(Object(o["I"])(),Object(o["k"])(j,{key:0,size:"mini",onClick:function(t){return d.handleCancel(e)},loading:e.row.loading},{default:Object(o["gb"])((function(){return[u]})),_:2},1032,["onClick","loading"]))],64)):(Object(o["I"])(),Object(o["k"])(w,{key:1,title:"删除不可逆，是否确认",onConfirm:function(t){return d.handleDel(e)}},{reference:Object(o["gb"])((function(){return[Object(o["q"])(j,{type:"danger",size:"mini",icon:"el-icon-delete"})]})),_:2},1032,["onConfirm"]))]})),_:1})]})),_:1},8,["data"]),[[g,e.loading]])])}Object(o["J"])();var b=n("5530"),O=(n("d81d"),n("4de4"),n("a434"),n("a1e9")),j=n("97af"),p=function(){return Object(j["a"])("upnp/devices")},f=function(e){return Object(j["a"])("upnp/mappings",{DeviceIndex:e})},m=function(e,t){return Object(j["a"])("upnp/del",{DeviceIndex:e,MappingIndex:t})},s=function(e){return Object(j["a"])("upnp/add",{Description:e.Description,Lifetime:+e.Lifetime,PrivatePort:+e.PrivatePort,Protocol:+e.Protocol,PublicPort:+e.PublicPort})},w=n("7864"),P={setup:function(){var e=Object(O["k"])({loading:!1,list:[],devices:[],deviceIndex:null,protocols:["TCP","UDP"]});p().then((function(t){e.devices=JSON.parse(t).map((function(e,t){return{text:e,index:t}}))}));var t=function(){f(e.deviceIndex).then((function(t){e.list=JSON.parse(t).map((function(t){return t.Expiration=new Date(t.Expiration).format("yyyy-MM-dd hh:mm:ss"),t.Protocol=e.protocols[t.Protocol],t}))}))},n=function(e){m(e.row.DeviceIndex,e.$index).then((function(){t()}))},o=function(){if(null==e.deviceIndex)return w["b"].error("请选择设备");e.list.filter((function(e){return!0===e.add})).length>0||e.list.push({PrivatePort:0,PublicPort:0,Lifetime:0,Protocol:0,Description:"",add:!0,loading:!1})},c=function(t){e.list.splice(t.$index,1)},i=function(e){e.row.loading=!0,s(e.row).then((function(){t()})).catch((function(t){w["b"].error(t),e.row.loading=!1}))};return Object(b["a"])(Object(b["a"])({},Object(O["r"])(e)),{},{deviceChange:t,handleDel:n,handleAdd:o,handleCancel:c,handleSave:i})}};n("9b86");P.render=d,P.__scopeId="data-v-7e66947e";t["default"]=P},1673:function(e,t,n){},"9b86":function(e,t,n){"use strict";n("1673")},d81d:function(e,t,n){"use strict";var o=n("23e7"),c=n("b727").map,i=n("1dde"),r=i("map");o({target:"Array",proto:!0,forced:!r},{map:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);