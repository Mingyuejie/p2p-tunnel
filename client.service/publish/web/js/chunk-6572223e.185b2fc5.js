(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6572223e"],{"098a":function(e,t,n){"use strict";n.r(t);var o=n("7a23");Object(o["L"])("data-v-b5d3eee6");var r={class:"upnp-wrap"},c={class:"head"},i=Object(o["p"])("增加映射"),l=Object(o["n"])("span",{style:{"margin-left":".6rem"}},"添加时，有效期为秒数,0为系统默认，尚不确定具体有效期",-1),a=Object(o["p"])("保存"),u=Object(o["p"])("取消"),b={class:"remark"},d=Object(o["n"])("p",{style:{"line-height":"2rem"}},"1、当你拥有公网IP时可用",-1);function O(e,t,n,O,j,p){var f=Object(o["R"])("el-button"),m=Object(o["R"])("el-option"),s=Object(o["R"])("el-select"),P=Object(o["R"])("el-input"),w=Object(o["R"])("el-table-column"),v=Object(o["R"])("el-popconfirm"),g=Object(o["R"])("el-table"),h=Object(o["R"])("el-alert"),k=Object(o["S"])("loading");return Object(o["I"])(),Object(o["m"])("div",r,[Object(o["n"])("div",c,[Object(o["q"])(f,{type:"primary",size:"mini",style:{"margin-right":".6rem"},onClick:O.handleAdd},{default:Object(o["gb"])((function(){return[i]})),_:1},8,["onClick"]),Object(o["q"])(s,{modelValue:e.deviceIndex,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.deviceIndex=t}),placeholder:"请选择设备",size:"mini",onChange:O.deviceChange},{default:Object(o["gb"])((function(){return[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["P"])(e.devices,(function(e){return Object(o["I"])(),Object(o["k"])(m,{key:e.index,label:e.text,value:e.index},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),l]),Object(o["hb"])(Object(o["q"])(g,{data:e.list,border:"",size:"mini"},{default:Object(o["gb"])((function(){return[Object(o["q"])(w,{prop:"PrivatePort",label:"内网端口",width:"100"},{default:Object(o["gb"])((function(e){return[e.row.add?(Object(o["I"])(),Object(o["k"])(P,{key:0,modelValue:e.row.PrivatePort,"onUpdate:modelValue":function(t){return e.row.PrivatePort=t},size:"mini"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o["I"])(),Object(o["m"])(o["b"],{key:1},[Object(o["p"])(Object(o["V"])(e.row.PrivatePort),1)],64))]})),_:1}),Object(o["q"])(w,{prop:"PublicPort",label:"外网端口",width:"100"},{default:Object(o["gb"])((function(e){return[e.row.add?(Object(o["I"])(),Object(o["k"])(P,{key:0,modelValue:e.row.PublicPort,"onUpdate:modelValue":function(t){return e.row.PublicPort=t},size:"mini"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o["I"])(),Object(o["m"])(o["b"],{key:1},[Object(o["p"])(Object(o["V"])(e.row.PublicPort),1)],64))]})),_:1}),Object(o["q"])(w,{prop:"Expiration",label:"有效期",width:"150"},{default:Object(o["gb"])((function(e){return[e.row.add?(Object(o["I"])(),Object(o["k"])(P,{key:0,modelValue:e.row.Lifetime,"onUpdate:modelValue":function(t){return e.row.Lifetime=t},size:"mini"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o["I"])(),Object(o["m"])(o["b"],{key:1},[Object(o["p"])(Object(o["V"])(e.row.Expiration),1)],64))]})),_:1}),Object(o["q"])(w,{prop:"Protocol",label:"协议",width:"100"},{default:Object(o["gb"])((function(t){return[t.row.add?(Object(o["I"])(),Object(o["k"])(s,{key:0,modelValue:t.row.Protocol,"onUpdate:modelValue":function(e){return t.row.Protocol=e},placeholder:"选择协议",size:"mini"},{default:Object(o["gb"])((function(){return[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["P"])(e.protocols,(function(e,t){return Object(o["I"])(),Object(o["k"])(m,{key:t,label:e,value:t},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"])):(Object(o["I"])(),Object(o["m"])(o["b"],{key:1},[Object(o["p"])(Object(o["V"])(t.row.Protocol),1)],64))]})),_:1}),Object(o["q"])(w,{prop:"Description",label:"说明"},{default:Object(o["gb"])((function(e){return[e.row.add?(Object(o["I"])(),Object(o["k"])(P,{key:0,modelValue:e.row.Description,"onUpdate:modelValue":function(t){return e.row.Description=t},size:"mini"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o["I"])(),Object(o["m"])(o["b"],{key:1},[Object(o["p"])(Object(o["V"])(e.row.Description),1)],64))]})),_:1}),Object(o["q"])(w,{prop:"todo",label:"操作",width:"145",fixed:"right",class:"t-c"},{default:Object(o["gb"])((function(e){return[e.row.add?(Object(o["I"])(),Object(o["m"])(o["b"],{key:0},[Object(o["q"])(f,{type:"primary",size:"mini",onClick:function(t){return O.handleSave(e)},loading:e.row.loading},{default:Object(o["gb"])((function(){return[a]})),_:2},1032,["onClick","loading"]),e.row.loading?Object(o["l"])("",!0):(Object(o["I"])(),Object(o["k"])(f,{key:0,size:"mini",onClick:function(t){return O.handleCancel(e)},loading:e.row.loading},{default:Object(o["gb"])((function(){return[u]})),_:2},1032,["onClick","loading"]))],64)):(Object(o["I"])(),Object(o["k"])(v,{key:1,title:"删除不可逆，是否确认",onConfirm:function(t){return O.handleDel(e)}},{reference:Object(o["gb"])((function(){return[Object(o["q"])(f,{type:"danger",size:"mini",icon:"el-icon-delete"})]})),_:2},1032,["onConfirm"]))]})),_:1})]})),_:1},8,["data"]),[[k,e.loading]]),Object(o["n"])("div",b,[Object(o["q"])(h,{title:"说明",type:"info","show-icon":"",closable:!1},{default:Object(o["gb"])((function(){return[d]})),_:1})])])}Object(o["J"])();var j=n("5530"),p=(n("d81d"),n("4de4"),n("a434"),n("a1e9")),f=n("97af"),m=function(){return Object(f["a"])("upnp/devices")},s=function(e){return Object(f["a"])("upnp/mappings",{DeviceIndex:e})},P=function(e,t){return Object(f["a"])("upnp/del",{DeviceIndex:e,MappingIndex:t})},w=function(e){return Object(f["a"])("upnp/add",{Description:e.Description,Lifetime:+e.Lifetime,PrivatePort:+e.PrivatePort,Protocol:+e.Protocol,PublicPort:+e.PublicPort})},v=n("7864"),g={setup:function(){var e=Object(p["k"])({loading:!1,list:[],devices:[],deviceIndex:null,protocols:["TCP","UDP"]});m().then((function(t){e.devices=JSON.parse(t).map((function(e,t){return{text:e,index:t}}))}));var t=function(){s(e.deviceIndex).then((function(t){e.list=JSON.parse(t).map((function(t){return t.Expiration=new Date(t.Expiration).format("yyyy-MM-dd hh:mm:ss"),t.Protocol=e.protocols[t.Protocol],t}))}))},n=function(e){P(e.row.DeviceIndex,e.$index).then((function(){t()}))},o=function(){if(null==e.deviceIndex)return v["b"].error("请选择设备");e.list.filter((function(e){return!0===e.add})).length>0||e.list.push({PrivatePort:0,PublicPort:0,Lifetime:0,Protocol:0,Description:"",add:!0,loading:!1})},r=function(t){e.list.splice(t.$index,1)},c=function(e){return e.row.PrivatePort=+e.row.PrivatePort,e.row.PublicPort=+e.row.PublicPort,e.row.Lifetime=+e.row.Lifetime,!e.row.PrivatePort||isNaN(e.row.PrivatePort)||!e.row.PublicPort||isNaN(e.row.PublicPort)?v["b"].error("请正确填写端口号"):!e.row.Lifetime||isNaN(e.row.Lifetime)?v["b"].error("请正确填写有效期"):(e.row.loading=!0,void w(e.row).then((function(){t()})).catch((function(t){v["b"].error(t),e.row.loading=!1})))};return Object(j["a"])(Object(j["a"])({},Object(p["r"])(e)),{},{deviceChange:t,handleDel:n,handleAdd:o,handleCancel:r,handleSave:c})}};n("ebe1");g.render=O,g.__scopeId="data-v-b5d3eee6";t["default"]=g},cafc:function(e,t,n){},d81d:function(e,t,n){"use strict";var o=n("23e7"),r=n("b727").map,c=n("1dde"),i=c("map");o({target:"Array",proto:!0,forced:!i},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},ebe1:function(e,t,n){"use strict";n("cafc")}}]);